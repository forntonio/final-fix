exports.id=476,exports.ids=[476],exports.modules={5005:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>o});var d=c(21124),e=c(95928),f=c(95671),g=c(90761),h=c(12254),i=c(21444),j=c(12305),k=c(10566);let l=(0,d.jsx)("div",{className:"m-2 absolute bg-black/80 left-0 w-action h-action top-[108px]"},"mask-action-top"),m=(0,d.jsx)("div",{className:"m-2 absolute bg-black/80 left-0 w-action h-action top-[12px]"},"mask-action-bottom");function n(a){return a.every(a=>void 0!==a)}function o(){let{currentCards:a,playCards:b,recoverCard:c}=(0,f.H)(),{selectedActions:o,setSelectedActions:p}=(0,h.xt)((0,j.k)(a=>({selectedActions:a.selectedActions,setSelectedActions:a.setSelectedActions}))),{connectionStatus:q,setGhsInactive:r,setGhsInitiative:s}=(0,g.A)(),t=a.filter(a=>"selected"===a.status),u=a=>b=>{let c=t.indexOf(b),[d,e]=[...o];p(c?["default"!==a&&a===d?void 0:d,a]:[a,"default"!==a&&a===e?void 0:e])},v=2===t.length&&n(o)?[(0,d.jsx)("button",{autoFocus:!0,onClick:()=>{if(n(o)){let[a,c]=t,[d,e]=o;p([void 0,void 0]),b([{action:d,card:a},{action:e,card:c}]),q===WebSocket.OPEN&&r()}},children:"End Turn"},"end-turn")]:void 0;return(0,d.jsx)(k.A,{title:"Selected cards",actions:v,children:(0,d.jsx)("div",{className:"flex gap-4 min-h-card min-w-[302px]",children:(0,d.jsx)(i.N,{mode:"popLayout",children:t.map((a,b)=>(0,d.jsx)(e.i,{autoFocus:1===b,card:a,actions:[{name:"Play default",onClick:()=>u("default")(a)},{name:"Play top",onClick:()=>u("top")(a)},...q===WebSocket.OPEN?[{name:"Select Initiative",onClick:()=>s(a)}]:[],{name:"Play bottom",onClick:()=>u("bottom")(a)}],onCloseCard:()=>c(t[b]),children:o[b]&&function(a){let b=[];return["top","default"].includes(a)&&b.push(l),["bottom","default"].includes(a)&&b.push(m),b}(o[b])},a.name))})})})}},15287:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(79565),f=c(59279);function g({children:a,currentHand:b,discardedCards:c,lostCards:g,selectedCards:h,activeEffects:i}){return(0,d.jsxs)("div",{className:"h-full p-2 gap-4 flex flex-col-reverse lg:flex-row justify-center",children:[(0,d.jsx)(e.A,{title:"Play your cards"}),(0,d.jsxs)(f.default,{children:[(0,d.jsxs)("div",{className:"h-full flex flex-col items-center gap-4",children:[b,c,g]}),(0,d.jsxs)("div",{className:"h-full flex flex-col items-center gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-row lg:flex-col gap-4 items-center",children:[a,h]}),i]})]})]})}},15808:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>q});var d=c(21124),e=c(95671),f=c(4768),g=c(38301),h=c(68009),i=c(95928),j=c(22914),k=c(33050),l=c(24515);function m(a){return a[Math.floor(Math.random()*a.length)]}function n({cards:a}){let[b,c]=(0,g.useState)(void 0),[f,h]=(0,g.useState)(!1),{makeRest:n}=(0,e.H)(),o={name:`Confirm Short Rest: lose ${b?.name}`,onClick:()=>{b&&n(b)}};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>c(m(a)),children:"Short Rest"}),b&&(0,d.jsx)(k.A,{onCancel:()=>c(void 0),children:(0,d.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[!f&&(0,d.jsx)(j.A,{autoFocus:!0,label:"Short Rest",onClick:()=>{h(!0),c(m(a.filter(a=>a!==b)))},children:(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:["Reroll Short Rest",(0,d.jsx)(l.default,{src:"/icons/fh-damage-color-icon.webp",alt:"Suffer damage",width:24,height:23})]})}),(0,d.jsx)(i.i,{card:b,actions:[o]})]})})]})}var o=c(10566);function p({cards:a}){let[b,c]=(0,g.useState)(!1),{makeRest:h}=(0,e.H)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>c(!0),children:"Long Rest"}),b&&(0,d.jsx)(k.A,{onCancel:()=>c(!1),children:(0,d.jsx)(o.A,{title:"Choose card to lose",children:(0,d.jsx)(f.A,{cards:a,actions:a=>[{name:`Confirm Long Rest: lose ${a.name}`,onClick:()=>h(a)}],maxCardLength:a.length})})})]})}function q(){let a=(0,g.use)(h.M),{currentCards:b,recoverCard:c,loseCard:i}=(0,e.H)(),j=b.filter(({status:a})=>"discarded"===a);return(0,d.jsx)(o.A,{title:"Discarded cards",actions:j.length>1?[(0,d.jsx)(n,{cards:j},"short-rest"),(0,d.jsx)(p,{cards:j},"long-rest")]:void 0,children:(0,d.jsx)(f.A,{cards:j,actions:a=>[{name:"Recover Card",onClick:()=>c(a)},{name:"Lose Card",onClick:()=>i(a)}],maxCardLength:a.handSize})})}},15981:(a,b,c)=>{Promise.resolve().then(c.bind(c,5005))},20578:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(71560),f=c(69116);function g(){return(0,d.jsx)(e.A,{title:"Lost cards",children:(0,d.jsx)(f.default,{})})}},20720:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/app/[selectedClass]/play/@activeEffects/ActiveEffects.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/app/[selectedClass]/play/@activeEffects/ActiveEffects.tsx","default")},22273:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/app/[selectedClass]/play/@discardedCards/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/app/[selectedClass]/play/@discardedCards/page.tsx","default")},23735:(a,b,c)=>{Promise.resolve().then(c.bind(c,83613))},34541:(a,b,c)=>{Promise.resolve().then(c.bind(c,54283))},35489:(a,b,c)=>{Promise.resolve().then(c.bind(c,22273))},48641:(a,b,c)=>{Promise.resolve().then(c.bind(c,15808))},50809:(a,b,c)=>{Promise.resolve().then(c.bind(c,90044))},54283:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/app/[selectedClass]/play/@selectedCards/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/app/[selectedClass]/play/@selectedCards/page.tsx","default")},55717:(a,b,c)=>{Promise.resolve().then(c.bind(c,64938))},58850:(a,b,c)=>{Promise.resolve().then(c.bind(c,62233))},59279:(a,b,c)=>{"use strict";c.d(b,{default:()=>e});var d=c(97954);(0,d.registerClientReference)(function(){throw Error("Attempted to call IdentityContext() from the server but IdentityContext is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/context/IdentityContext.tsx","IdentityContext");let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/context/IdentityContext.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/context/IdentityContext.tsx","default")},60657:(a,b,c)=>{Promise.resolve().then(c.bind(c,20720))},61797:(a,b,c)=>{Promise.resolve().then(c.bind(c,69116))},62233:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/app/[selectedClass]/play/@currentHand/CurrentHandClassWrapper.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/app/[selectedClass]/play/@currentHand/CurrentHandClassWrapper.tsx","default")},63961:(a,b,c)=>{Promise.resolve().then(c.bind(c,66403))},64938:(a,b,c)=>{"use strict";c.d(b,{default:()=>i});var d=c(21124),e=c(4768),f=c(95671),g=c(68009),h=c(38301);function i(){let a=(0,h.use)(g.M),{currentCards:b,recoverCard:c}=(0,f.H)(),i=b.filter(({status:a})=>"lost"===a);return(0,d.jsx)(e.A,{cards:i,actions:a=>[{name:"Recover Card",onClick:()=>c(a)}],maxCardLength:a.handSize})}},66403:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>E});var d=c(21124),e=c(95671),f=c(38301),g=c(24515);let h={path:"/blinkblade/icons/fh-blinkblade-fast-color-icon.webp",width:55,height:60},i={path:"/blinkblade/icons/fh-blinkblade-slow-color-icon.webp",width:30,height:60};function j({speed:a}){let{path:b,width:c,height:e}="fast"===a?h:i;return(0,d.jsx)(g.default,{src:b,alt:`speed-${a}`,width:c,height:e})}var k=c(83613),l=c(83771);function m(){let{identity:a,changeIdentity:b}=(0,f.use)(k._),c=l.Fk[a];return(0,d.jsx)("button",{"aria-label":"change speed",className:"flex justify-center items-center gap-2 h-24 w-24",onClick:()=>{let a="fast"===c?"slow":"fast",d=[c,a];b(l.Fk.indexOf(a),d)},children:(0,d.jsx)(j,{speed:c})})}var n=c(98554),o=c(85479),p=c(17431);function q(){let{identity:a,changeIdentity:b}=(0,f.use)(k._),c=o.u[a];return(0,d.jsx)("button",{"aria-label":"change form",className:"flex justify-center items-center gap-2 h-24 w-24",onClick:()=>{let a="melee"===c?"ranged":"melee",d=[c,a];b(o.u.indexOf(a),d)},children:(0,d.jsx)(p.A,{form:o.u[a]})})}var r=c(72945);let s={low:"low",regular:"low",high:"regular",over:"high"};function t(){let{identity:a,changeIdentity:b}=(0,f.use)(k._),c=r.tb[a];return(0,d.jsx)("button",{onClick:()=>{let a=s[c];if(a===c)return;let d=[c,a];b(r.tb.indexOf(a),d)},"aria-label":"decrease pressure",children:(0,d.jsx)(g.default,{src:"/metal-mosaic/icons/fh-metal-mosaic-pressure-down-color-icon.webp",alt:"pressure-down",width:417,height:600})})}function u(){let{identity:a}=(0,f.use)(k._),b=r.tb[a],c=`/metal-mosaic/icons/fh-metal-mosaic-pressure-${b}-color-icon.webp`;return(0,d.jsx)(g.default,{"aria-label":`${b} pressure`,src:c,alt:`pressure-${b}`,width:60,height:60})}let v={low:"regular",regular:"high",high:"over",over:"over"};function w(){let{identity:a,changeIdentity:b}=(0,f.use)(k._),c=r.tb[a];return(0,d.jsx)("button",{onClick:()=>{let a=v[c];if(a===c)return;let d=[c,a];b(r.tb.indexOf(a),d)},"aria-label":"increase pressure",children:(0,d.jsx)(g.default,{src:"/metal-mosaic/icons/fh-metal-mosaic-pressure-up-color-icon.webp",alt:"pressure-up",width:417,height:600})})}function x(){return(0,d.jsxs)("div",{className:"grid grid-cols-3 grid-rows-2 place-items-center gap-2 h-24 w-24",children:[(0,d.jsx)("div",{className:"col-span-2 row-span-2",children:(0,d.jsx)("div",{className:"rounded-full bg-white",children:(0,d.jsx)(u,{})})}),(0,d.jsx)(w,{}),(0,d.jsx)(t,{})]})}var y=c(10566),z=c(1809),A=c(90761),B=c(68009),C=c(50329),D=c(47068);function E(){let a=(0,f.use)(B.M),{undo:b,redo:c}=(0,e.H)(),{connectionStatus:g,state:h,currentCharacter:i,currentPlayingFigure:j}=(0,A.A)(),k=(0,f.useMemo)(()=>j?j.name===i?.name?"Your turn":`Current Turn: ${j.title||(0,C.Fj)(j.name)}`:"End of round",[j,i?.name]);return(0,d.jsx)(y.A,{title:(0,d.jsxs)(z.A,{children:["GHS Status: ",function(a){switch(a){case WebSocket.OPEN:return"\uD83D\uDFE2";case WebSocket.CONNECTING:return"\uD83D\uDD35";case WebSocket.CLOSING:return"\uD83D\uDFE1";case WebSocket.CLOSED:return"\uD83D\uDD34";default:return"â“"}}(g)]}),actions:[(0,d.jsx)("button",{onClick:b,children:"Undo"},"undo"),(0,d.jsx)("button",{onClick:c,children:"Redo"},"redo")],children:(0,d.jsxs)("div",{className:"flex flex-col gap-4 items-center",children:[(0,d.jsxs)("div",{className:"flex gap-4 justify-center items-center",children:[!(0,D.FQ)(a)&&(0,d.jsx)(n.A,{fhClass:a}),(0,D.FQ)(a)&&(0,d.jsx)(q,{}),(0,l.T7)(a)&&(0,d.jsx)(m,{}),(0,r.Ev)(a)&&(0,d.jsx)(x,{})]}),g===WebSocket.OPEN&&(0,d.jsxs)("h3",{className:"text-lg font-bold",children:["next"===h&&k,"draw"===h&&`Chosen Initiative: ${i?.initiative||"-"}`]})]})})}},69116:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/app/[selectedClass]/play/@lostCards/LostCards.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/app/[selectedClass]/play/@lostCards/LostCards.tsx","default")},76337:(a,b,c)=>{Promise.resolve().then(c.bind(c,79683))},77002:(a,b,c)=>{Promise.resolve().then(c.bind(c,95791))},79683:(a,b,c)=>{"use strict";c.d(b,{default:()=>z});var d=c(21124),e=c(95671),f=c(95928),g=c(4768),h=c(68009),i=c(27923),j=c(31240),k=c(38301),l=c(50329),m=c(24515);function n({className:a}){let b=(0,l.$l)(a),c=`/${b}/icons/fh-${b}-character-token.webp`;return(0,d.jsx)(m.default,{src:c,alt:"token",width:20,height:20,className:"absolute"})}var o=c(12254),p=c(12305);function q({card:a,actions:b=[],onCloseCard:c}){let{slots:e,tokenPosition:g=0}=a,l=(0,k.use)(h.M),[{x:m,y:q,radius:r=10},s]=(0,k.useState)(e[g]),{moveTokenForward:t,moveTokenBackward:u}=function(){let{states:a,updateStates:b,currentStateIndex:c}=(0,o.xt)((0,p.k)(a=>({states:a.states,updateStates:a.updateStates,currentStateIndex:a.currentStateIndex}))),d=(0,k.useMemo)(()=>a[c],[a,c]);return{moveTokenForward:e=>{if(!e.slots)throw Error(`Card ${e.name} doest not have slots`);let f=d.findIndex(a=>a===e),g=(e.tokenPosition??0)+1;if(g>=e.slots.length){let g=function(a){if("activeTop"===a)return"top";if("activeBottom"===a)return"bottom";throw Error("Invalid card status")}(e.status),h="activeDiscard"===e.actions[g]?"discarded":"lost",i=d.with(f,{...e,status:h,tokenPosition:0});b([...a.slice(0,c+1),i])}else{let h=d.with(f,{...e,tokenPosition:g});b([...a.slice(0,c+1),h])}},moveTokenBackward:e=>{if(!e.slots)throw Error(`Card ${e.name} doesn't not have slots`);let f=d.findIndex(a=>a===e),g=Math.max(e.tokenPosition?e.tokenPosition-1:0,0),h=d.with(f,{...e,tokenPosition:g});b([...a.slice(0,c+1),h])}}}(),v={name:"Move token forward",onClick:()=>t(a)},w=l&&(0,i.T)(l)&&g>0?[{name:"Move token backward",onClick:()=>u(a)},v]:[v];return(0,d.jsx)(f.i,{card:a,actions:[...b,...w],onCloseCard:c,children:(0,d.jsx)(j.Uu,{animate:{x:m-r,y:q-r},transition:{ease:"easeOut",duration:.2},children:l&&(0,d.jsx)(n,{className:l.name})})})}function r({position:{x:a,y:b,size:c=20}}){return(0,d.jsx)(m.default,{src:"/hive/icons/fh-hive-mode-color-icon.webp",alt:"mode token",width:c,height:c,className:"absolute",style:{left:a-c/2,top:b-c/2}})}function s(){let{states:a,updateStates:b,currentStateIndex:c}=(0,o.xt)((0,p.k)(a=>({states:a.states,updateStates:a.updateStates,currentStateIndex:a.currentStateIndex}))),d=(0,k.useMemo)(()=>a[c],[a,c]);return{activateHiveMode:e=>{if(!e.mode)throw Error(`Card ${e.name} can't be transfered to`);let f=d.findIndex(a=>a===e),g=d.with(f,{...e,status:"activeTop",isSelectedMode:!0});b([...a.slice(0,c+1),g])},transferHive:e=>{if(!e.mode)throw Error(`Card ${e.name} can't be transfered to`);if(-1===d.findIndex(a=>a.isSelectedMode))throw Error("Hive should have at least one mode activated");let f=d.findIndex(a=>a===e),g=d.map(a=>({...a,isSelectedMode:!1})).with(f,{...e,isSelectedMode:!0});b([...a.slice(0,c+1),g])}}}function t({card:a,actions:b=[],onCloseCard:c}){let{mode:e,isSelectedMode:g}=a,{transferHive:h}=s(),i=[{name:"Transfer Hive",onClick:()=>h(a)}];return(0,d.jsx)(f.i,{card:a,actions:[...b,...i],onCloseCard:c,children:g&&e&&(0,d.jsx)(r,{position:{...e}})})}var u=c(10566),v=c(33050),w=c(18113),x=c(21444);function y(a){return!!a.mode}function z(){let{currentCards:a,discardCard:b,loseCard:c}=(0,e.H)(),{activateHiveMode:i}=s(),j=(0,k.use)(h.M),[l,m]=(0,k.useState)(!1),n=a.filter(({status:a})=>["activeTop","activeBottom"].includes(a)),o=a=>"activeDiscard"===("activeTop"===a.status?a.actions.top:a.actions.bottom)?b(a):c(a),p=a.filter(y);return(0,d.jsxs)("div",{className:"grid grid-cols-3 gap-4 min-w-[461px] min-h-card",children:[l&&(0,d.jsx)(v.A,{onCancel:()=>m(!1),children:(0,d.jsx)(u.A,{title:"Select mode",children:(0,d.jsx)(g.A,{cards:p,actions:a=>[{name:"Activate Hive Mode",onClick:()=>{i(a),m(!1)}}],maxCardLength:p.length,onCloseCard:o})})}),(0,d.jsx)(x.N,{mode:"popLayout",children:n.map(a=>{var b;return b=a,(0,w.b)(j)&&y(b)?(0,d.jsx)(t,{card:b,onCloseCard:()=>o(b)},b.name):b.slots?(0,d.jsx)(q,{card:b,onCloseCard:()=>o(b)},b.name):(0,d.jsx)(f.i,{card:b,onCloseCard:()=>o(b)},b.name)})})]})}},83613:(a,b,c)=>{"use strict";c.d(b,{_:()=>h,default:()=>i});var d=c(21124),e=c(90761),f=c(38301),g=c(68009);let h=(0,f.createContext)({identity:0,changeIdentity:()=>{}});function i({children:a}){let{connectionStatus:b,currentCharacter:c,setGhsIdentity:i}=(0,e.A)();(0,f.use)(g.M);let[j,k]=(0,f.useState)(0);return(0,d.jsx)(h,{value:{identity:j,changeIdentity:(a,c)=>{k(a),b===WebSocket.OPEN&&i(a,c)}},children:a})}},86783:(a,b,c)=>{Promise.resolve().then(c.bind(c,59279))},90044:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspaces/final-fix/src/app/[selectedClass]/play/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspaces/final-fix/src/app/[selectedClass]/play/page.tsx","default")},90761:(a,b,c)=>{"use strict";c.d(b,{A:()=>j});var d=c(68009),e=c(68867),f=c(83771),g=c(38301);function h(a,b,c,d){let{characters:e,monsters:f,revision:g,playSeconds:h,...j}=a,k=e.findIndex(({name:a})=>a===b),l=f.findIndex(({name:a})=>a===b),m={characters:e,monsters:f};return k>-1?m.characters=e.with(k,{...e[k],...c}):l>-1&&(m.monsters=f.with(l,{...f[l],...c})),{...j,revision:g+1,playSeconds:h+(i()-d),...m}}function i(){return Math.floor(Date.now()/1e3)}function j(){let{connectionStatus:a,gameState:b,sendGameStateToGhs:c}=(0,g.use)(e.P),j=(0,g.use)(d.M),[k,l]=(0,g.useState)(),[m,n]=(0,g.useState)(),[o,p]=(0,g.useState)(),[q,r]=(0,g.useState)(i());return{connectionStatus:a,state:o,currentCharacter:k,currentPlayingFigure:m,setGhsInitiative:({initiative:d})=>{if(a!==WebSocket.OPEN||!j||!k||!b)return;let e=d;if((0,f.T7)(j)){let a=k.identity;"slow"===f.Fk[a]&&(e+=30)}let g=h(b,k.name,{initiative:e},q);c&&c(g,["setInitiative",k.title||j.name,`'${e}'`])},setGhsInactive:()=>{if(a!==WebSocket.OPEN||!j||!b)return;let d=b,{figures:e}=b,f={"Banner Spear":"banner-spear",Bladeswarm:"envx",Blinkblade:"blinkblade",Boneshaper:"boneshaper","Crashing Tide":"coral",Deathwalker:"deathwalker",Deepwraith:"kelp",Drifter:"drifter","Frozen Fist":"fist",Geminate:"geminate",Hive:"prism",Infuser:"astral","Metal Mosaic":"drill","Pain Conduit":"shackles",Pyroclast:"meteor",Shattersong:"shards",Snowdancer:"snowflake",Trapper:"trap"}[j.name];if(!k||k.off||!k.active)return;d=h(b,k.name,{active:!1,off:!0},q);let g=e.findIndex(a=>a===`fh-${f}`);g<e.length-1&&(d=h(d,e[g+1].replace("fh-",""),{active:!0,off:!1},q)),c&&c(d,["unsetActive",k.title||j.name])},setGhsIdentity:(a,d)=>{if(!b||!j||!k)return;let{name:e,title:f}=k,g=["nextIdentity",f||j.name,e,...d],i=h(b,e,{identity:a},q);c&&c(i,g)}}}},92155:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(71560),f=c(20720);function g(){return(0,d.jsx)(e.A,{title:"Active effects",children:(0,d.jsx)(f.default,{})})}},95671:(a,b,c)=>{"use strict";c.d(b,{H:()=>g});var d=c(12254),e=c(38301),f=c(12305);function g(){let{states:a,updateStates:b,currentStateIndex:c,setStateIndex:g}=(0,d.xt)((0,f.k)(a=>({states:a.states,updateStates:a.updateStates,currentStateIndex:a.currentStateIndex,setStateIndex:a.setStateIndex,selectedActions:a.selectedActions,setSelectedActions:a.setSelectedActions}))),h=(0,e.useMemo)(()=>a[c],[a,c]),i=(d,e)=>f=>{if(e&&!e())return;let g=[...h.filter(a=>a!==f),{...f,status:d}];b([...a.slice(0,c+1),g])},j=i("selected",()=>h.filter(a=>"selected"===a.status).length<2),k=i("discarded"),l=i("lost");return{currentCards:h,selectCard:j,playCards:d=>{let e=[...h.filter(a=>!d.map(({card:a})=>a.name).includes(a.name)),...d.map(({action:a,card:b})=>({...b,status:function(a,b){if("default"===b)return"discarded";switch(a[b]){case"discard":return"discarded";case"lose":return"lost";case"activeDiscard":case"activeLost":return"top"===b?"activeTop":"activeBottom"}}(b.actions,a)}))];b([...a.slice(0,c+1),e])},discardCard:k,loseCard:l,recoverCard:i("inHand"),makeRest:d=>{let e=h.filter(({status:a})=>"discarded"===a).filter(({name:a})=>a!==d.name),f=[...h.filter(a=>"discarded"!==a.status),...e.map(a=>({...a,status:"inHand"})),{...d,status:"lost"}];b([...a.slice(0,c+1),f])},undo:()=>{0!==c&&g(c-1)},redo:()=>{c!==a.length-1&&g(c+1)}}}},95791:(a,b,c)=>{"use strict";c.d(b,{default:()=>m});var d=c(21124),e=c(85479),f=c(47068),g=c(4768),h=c(68009),i=c(95671),j=c(38301);function k({classFilter:a=()=>!0}){let b=(0,j.use)(h.M),{currentCards:c,selectCard:e,discardCard:k,loseCard:l}=(0,i.H)(),m=c.filter(a).filter(({status:a})=>"inHand"===a);return(0,d.jsx)(g.A,{cards:m,actions:a=>[{name:"Select Card",onClick:()=>e(a)},{name:"Discard Card",onClick:()=>k(a)},{name:"Lose Card",onClick:()=>l(a)}],maxCardLength:(0,f.FQ)(b)?b.handSize/2:b.handSize})}var l=c(83613);function m(){let a=(0,j.use)(h.M),{identity:b}=(0,j.use)(l._);return(0,d.jsx)(k,{classFilter:(0,f.FQ)(a)?({form:a})=>a===e.u[b]:void 0})}},96315:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>g});var d=c(75338),e=c(71560),f=c(62233);function g(){return(0,d.jsx)(e.A,{title:"Current hand",children:(0,d.jsx)(f.default,{})})}}};